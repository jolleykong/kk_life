**after_commit**：master把每一个事务写到二进制日志并保存到磁盘上，并且**提交（二阶段提交）事务，再把事务发送给从库，开始等待slave的应答**。响应后master返回结果给客户端，客户端才可继续。

 **after_sync** ：master把每一个事务写到二进制日志并保存磁盘上（binlog落盘后，二阶段提交前），并且把事务发送给从库，开始等待slave的应答。**确认slave响应后，再提交（commit）事务到存储引擎**，并返回结果给客户端，客户端才可继续。

**总之，**MySQL5.7是在Master收到Slave应答之后才Commit事务，MySQL5.6/5.5是在Master Commit之后才等待Slave的应答。MySQL5.7半同步的好处就是在确认事务复制到Slave之前，并发的其他线程看不到当前事务的数据。当Master故障时，要么提交的事务已经复制到Slave，要么全部都没提交，这样就保证了数据的一致性

导致复制延迟的几种可能：表无主键、索引，主从库配置差距，主库开双1，从库