- 开发环境建议：

- 1. 参数开启：

  2. - long_query_time=0
     - long_queries_not_using_indexes=1       & log_throttle_queries_not_usig_indexes=10  

- \#未用索引的查询。且1分钟内重复发生的记录最多记录10次，避免过多日志。

- 1. 甚至可以直接打开general_log监测全部请求
  2. 定期检查分析slow log
  3. 授权和生产环境保持一致

-  

-  

- 开发规范：

- 1. 使用InnoDB表，并且InnoDB表一定要有显式主键

  2. - 主从复制时，从库优先以主键方式查找数据以apply relay log，拥有主键非常重要，最严重的时候，可能会造成每次apply都进行全表扫描
     - InnoDB是索引组织表IOT，MyISAM是堆表HOT
     - InnoDB表所有记录（row data）都以主键（聚集索引）逻辑顺序存储，二级索引（副主索引，secondary index）的索引节点值会包含主键值。

  3. 最好选择自增ID作为InnoDB表主键

  4. - 强烈建议每个表必加字段：自增主键aid，记录创建时间ctime、记录最后修改时间mtime,在业务上以及日常维护上会有很多便利

  5. 不要在数据库里做运算，尤其表达式、函数、浮点运算、字符串操作等

  6. 尽可能不用text\blob类型，不可避免的话，拆分到外部表再进行关联

  7. 表越窄越好，所有列数据类型尽可能小

  8. 表越小越好，数据冷热分离，只保留最新热数据

  9. 令每个SQL效率足够高，不阻塞

  10. 重要业务SQL先查看执行计划后再创建合适的索引，不要瞎建索引。建索引的依据可以参照“[开发环境建议](https://github.com/zhishutech/mysql-sql-standard/blob/master/SUMMARY.md)”

  11. 不要对字符串、长文本的全部长度建立索引，要么先hash，要么做部分索引

  12. 不要在where条件中用随机函数（rand()) ，大概率会造成全表扫描

  13. 数据库中坚决不能明文存储重要信息，即便是可逆加密方式也要谨慎，防止被拖库后用户数据泄露

  14. 默认使用utf8mb4字符集，兼容性最好；不需要存储多字节字符时，则可以选择latinl或binary类型

  15. 非唯一索引加"i_"命名前缀，唯一索引加"uk_"命名前缀

  16. 单表索引数一般不超过5个

  17. 索引中的字段数不超过5个

  18. 唯一索引尽量由不超过3个列组成，并尽量不要选择字符串列

  19. 唯一索引不和主键重复或冗余

  20. 联合索引中，尽量把基数大〈去重后唯一值多）的列放在前面

  21. 有较多单列索引时，一定要结合业务需求进行评估审核

  22. 用explain审视执行计划，尽量不要全表、全索引扫描，以及Using      File Sort、UsingTemporary等情况

  23. 库表大小、容量方面的几个建议

  24. 1. 字段数不超过30 ~ 50个，超过就考虑垂直拆分
      2. 行数据平均长度不超过200字节，超过就考虑垂直拆分
      3. 行数不超过5000万，超过就考虑物理分表
      4. 表空间文件物理大小不超过10GB，超过就考虑物理分表
      5. 整个database物理大小不超过500GB，超过就考虑物理分库
      6. 整个实例物理大小不超过1TB，超过就考虑多实例
      7. 按日期存储日志之类的业务，优先考虑用表分区
      8. 单表的tps超过2000时，就该考虑物理分表

  

- https://github.com/zhishutech/mysql-sql-standard

- https://github.com/zhishutech/mysql-sql-standard/blob/master/SUMMARY.md

-  